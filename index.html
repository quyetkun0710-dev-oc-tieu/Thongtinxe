<!DOCTYPE html>
<html lang="vi">
<head>
<meta charset="UTF-8">
<title>QU·∫¢N L√ù PH∆Ø∆†NG TI·ªÜN</title>
<meta name="viewport" content="width=device-width, initial-scale=1.0">

<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bulma@0.9.4/css/bulma.min.css">

<style>
body { background:#f4f6f8 }
.hidden { display:none }
.card-hover { transition:0.2s }
.card-hover:hover { cursor:pointer; transform:scale(1.03) }
.form-box { max-width:1100px; margin:auto }

/* ===== HEADER TRANG ƒê·∫¶U (HOME ONLY) ===== */

.home-header {
  background: linear-gradient(135deg, #fc1818, #b63c3c);
  border-radius: 16px;
  padding: 28px 32px;
  margin-bottom: 32px;
  color: #ffffff;
  display: flex;
  align-items: center;
  gap: 20px;
  box-shadow: 0 12px 30px rgba(0,0,0,0.18);
}

.home-header .logo {
  width: 72px;
  height: 72px;
  border-radius: 50%;
  background: rgba(161, 245, 169, 0.18);
  display: flex;
  align-items: center;
  justify-content: center;
  font-size: 36px;
}

.home-header .title-box h1 {
  margin: 0;
  font-size: 26px;
  font-weight: 800;
  letter-spacing: 0.5px;
}

.home-header .title-box p {
  margin-top: 6px;
  font-size: 14px;
  opacity: 0.9;
}

/* mobile */
@media (max-width: 768px) {
  .home-header {
    flex-direction: column;
    text-align: center;
  }
}
</style>
</head>

<body>

<section class="section">
<div class="container">

<!-- ================= HOME ================= -->
<div id="home">
<div class="home-header">
<div class="header-inner header-center">
  <img src="https://drive.google.com/thumbnail?id=12ye0HEGRTrKu57KVf05AV04ZdmMtN541&sz=w800">
</div>
 <div class="title-box">
    <h1>MANAGERMENT FLEET SYSTEM</h1>
    <p></p>
  </div>
</div>


<div class="columns is-multiline">
  <div class="column is-3">
    <div class="card card-hover" onclick="openTag('xe')">
      <div class="card-content has-text-centered">
        <p class="title is-5">üöö Th√¥ng tin xe</p>
      </div>
    </div>
  </div>

  <div class="column is-3">
    <div class="card card-hover" onclick="openTag('taixe')">
      <div class="card-content has-text-centered">
        <p class="title is-5">üë®‚Äç‚úàÔ∏è T√†i x·∫ø</p>
      </div>
    </div>
  </div>

  <div class="column is-3">
    <div class="card card-hover" onclick="openTag('nhatky')">
      <div class="card-content has-text-centered">
        <p class="title is-5">üìí Nh·∫≠t k√Ω v·∫≠n h√†nh</p>
      </div>
    </div>
  </div>

  <div class="column is-3">
    <div class="card card-hover" onclick="openTag('baoduong')">
      <div class="card-content has-text-centered">
        <p class="title is-5">üõ†Ô∏è B·∫£o d∆∞·ª°ng</p>
      </div>
    </div>
  </div>

  <div class="column is-3">
  <div class="card card-hover" onclick="openTag('fuel')">
    <div class="card-content has-text-centered">
      <p class="title is-5">‚õΩ Nhi√™n li·ªáu</p>
    </div>
  </div>
</div>
</div>
<div class="column is-3">
  <div class="card card-hover" onclick="openTag('danhgia')">
    <div class="card-content has-text-centered">
      <p class="title is-5">üìä ƒê√°nh gi√° nh√¢n s·ª±</p>
    </div>
  </div>
</div>
</div>

<!-- ================= START TAG: TH√îNG TIN XE ================= -->
<div id="xe" class="hidden form-box">

<button class="button mb-4" onclick="backHome()">‚¨Ö Quay l·∫°i</button>
<h2 class="title is-4 has-text-weight-bold">üöö TH√îNG TIN XE</h2>

<!-- ========= TRA C·ª®U ========= -->
<section class="box">
<h3 class="subtitle has-text-info">üîç Tra c·ª©u theo BI·ªÇN S·ªê XE</h3>
<div class="columns is-vcentered">
  <div class="column is-4">
    <label class="label">Bi·ªÉn s·ªë xe (KEY)</label>
    <input class="input" id="search_bien_so_xe" placeholder="VD: 51C-12345">
  </div>
  <div class="column">
    <button class="button is-info mt-5" type="button" onclick="searchXe()">Tra c·ª©u</button>
  </div>
</div>
<div id="xe_result" class="mt-4"></div>
</section>

<form id="xeForm">

<!-- ========= 1. TH√îNG TIN C∆† B·∫¢N ========= -->
<h3 class="subtitle">1Ô∏è‚É£ Th√¥ng tin c∆° b·∫£n</h3>
<div class="columns">
  <div class="column">
    <label class="label">Bi·ªÉn s·ªë xe</label>
    <input class="input" name="bien_so_xe">
  </div>
  <div class="column">
    <label class="label">Lo·∫°i xe</label>
    <input class="input" name="loai_xe">
  </div>
  <div class="column">
    <label class="label">T·∫£i tr·ªçng</label>
    <input class="input" name="tai_trong">
  </div>
</div>

<!-- ========= 2. TH√îNG S·ªê K·ª∏ THU·∫¨T ========= -->
<h3 class="subtitle">2Ô∏è‚É£ Th√¥ng s·ªë k·ªπ thu·∫≠t</h3>
<div class="columns">
  <div class="column">
    <label class="label">NƒÉm s·∫£n xu·∫•t</label>
    <input class="input" name="nam_sx">
  </div>
  <div class="column">
    <label class="label">S·ªë khung</label>
    <input class="input" name="so_khung">
  </div>
  <div class="column">
    <label class="label">S·ªë m√°y</label>
    <input class="input" name="so_may">
  </div>
</div>

<div class="columns">
  <div class="column">
    <label class="label">M√£ lo·∫°i</label>
    <input class="input" name="ma_loai">
  </div>
  <div class="column"></div>
  <div class="column"></div>
</div>

<!-- ========= 3. K√çCH TH∆Ø·ªöC & TH·ªÇ T√çCH ========= -->
<h3 class="subtitle">3Ô∏è‚É£ K√≠ch th∆∞·ªõc th√πng</h3>
<div class="columns">
  <div class="column">
    <label class="label">D√†i (m)</label>
    <input class="input" type="number" step="0.01" name="thung_dai" oninput="calcTheTichThung()">
  </div>
  <div class="column">
    <label class="label">R·ªông (m)</label>
    <input class="input" type="number" step="0.01" name="thung_rong" oninput="calcTheTichThung()">
  </div>
  <div class="column">
    <label class="label">Cao (m)</label>
    <input class="input" type="number" step="0.01" name="thung_cao" oninput="calcTheTichThung()">
  </div>
</div>

<div class="columns">
  <div class="column">
    <label class="label">K√≠ch th∆∞·ªõc th√πng</label>
    <input class="input" name="kich_thuoc_thung" readonly>
  </div>
  <div class="column">
    <label class="label">Th·ªÉ t√≠ch th√πng (m¬≥)</label>
    <input class="input" name="the_tich_thung" readonly>
  </div>
  <div class="column"></div>
</div>

<!-- ========= 4. KH·ªêI L∆Ø·ª¢NG ========= -->
<h3 class="subtitle">4Ô∏è‚É£ Kh·ªëi l∆∞·ª£ng</h3>
<div class="columns">
  <div class="column">
    <label class="label">Kh·ªëi l∆∞·ª£ng b·∫£n th√¢n</label>
    <input class="input" name="khoi_luong_bt">
  </div>
  <div class="column">
    <label class="label">Kh·ªëi l∆∞·ª£ng chuy√™n ch·ªü</label>
    <input class="input" name="khoi_luong_cc">
  </div>
  <div class="column"></div>
</div>

<!-- ========= 5. PH√ÅP L√ù ========= -->
<h3 class="subtitle">5Ô∏è‚É£ Th√¥ng tin ph√°p l√Ω</h3>

<div class="columns">
  <div class="column">
    <label class="label">S·ªë ƒëƒÉng k√Ω</label>
    <input class="input" name="so_dang_ky">
  </div>
  <div class="column">
    <label class="label">Ng√†y ƒëƒÉng k√Ω</label>
    <input class="input" type="date" name="ngay_dang_ky" onchange="calc(this,30,'cb_dk')">
  </div>
  <div class="column"></div>
</div>

<div class="columns">
  <div class="column">
    <label class="label">S·ªë ƒëƒÉng ki·ªÉm</label>
    <input class="input" name="so_dang_kiem">
  </div>
  <div class="column">
    <label class="label">Ng√†y ƒëƒÉng ki·ªÉm</label>
    <input class="input" type="date" name="ngay_dang_kiem" onchange="calc(this,30,'cb_dkiem')">
  </div>
  <div class="column"></div>
</div>

<div class="columns">
  <div class="column">
    <label class="label">S·ªë ph√π hi·ªáu</label>
    <input class="input" name="so_phu_hieu">
  </div>
  <div class="column">
    <label class="label">Ng√†y ph√π hi·ªáu</label>
    <input class="input" type="date" name="ngay_phu_hieu" onchange="calc(this,15,'cb_ph')">
  </div>
  <div class="column"></div>
</div>

<div class="columns">
  <div class="column">
    <label class="label">S·ªë b·∫£o hi·ªÉm</label>
    <input class="input" name="so_bao_hiem">
  </div>
  <div class="column">
    <label class="label">Ng√†y b·∫£o hi·ªÉm</label>
    <input class="input" type="date" name="ngay_bao_hiem" onchange="calc(this,30,'cb_bh')">
  </div>
  <div class="column"></div>
</div>

<!-- ========= 6. TR·∫†NG TH√ÅI ========= -->
<h3 class="subtitle">6Ô∏è‚É£ Tr·∫°ng th√°i</h3>
<div class="columns">
  <div class="column">
    <label class="label">T√¨nh tr·∫°ng ho·∫°t ƒë·ªông</label>
    <label class="radio"><input type="radio" name="tinh_trang_hoat_dong" value="dang_hoat_dong" checked> üü¢ ƒêang ho·∫°t ƒë·ªông</label><br>
    <label class="radio"><input type="radio" name="tinh_trang_hoat_dong" value="da_ngung"> üî¥ ƒê√£ ng·ª´ng</label><br>
    <label class="radio"><input type="radio" name="tinh_trang_hoat_dong" value="da_ban_giao"> üü° ƒê√£ b√†n giao</label>
  </div>

  <div class="column">
    <label class="label">Lo·∫°i bi·ªÉn s·ªë</label>
    <label class="radio"><input type="radio" name="loai_bien_so" value="bien_vang" checked> Bi·ªÉn v√†ng</label><br>
    <label class="radio"><input type="radio" name="loai_bien_so" value="bien_trang"> Bi·ªÉn tr·∫Øng</label>
  </div>
  <div class="column"></div>
</div>

<!-- ========= HIDDEN ========= -->
<input type="hidden" name="cb_dk">
<input type="hidden" name="cb_dkiem">
<input type="hidden" name="cb_ph">
<input type="hidden" name="cb_bh">

<button class="button is-primary is-fullwidth mt-5">
üíæ L∆ØU TH√îNG TIN XE
</button>

</form>
</div>
<!-- ================= END TAG: TH√îNG TIN XE ================= -->



<!-- ================= START TAG: TH√îNG TIN T√ÄI X·∫æ ================= -->
<div id="taixe" class="hidden form-box">

<button class="button mb-4" onclick="backHome()">‚¨Ö Quay l·∫°i</button>
<h2 class="title is-4">üë®‚Äç‚úàÔ∏è TH√îNG TIN T√ÄI X·∫æ</h2>

<!-- ===== TRA C·ª®U ===== -->
<section class="box">
  <h3 class="subtitle">üîç Tra c·ª©u theo M√É NH√ÇN VI√äN</h3>
  <div class="columns">
    <div class="column is-4">
      <input class="input" id="search_mnv" placeholder="Nh·∫≠p m√£ nh√¢n vi√™n">
    </div>
    <div class="column">
      <button class="button is-info" onclick="searchTaiXe()">Tra c·ª©u</button>
    </div>
  </div>
</section>

<form id="taixeForm">

<!-- 1. TH√îNG TIN C√Å NH√ÇN -->
<h3 class="subtitle">1Ô∏è‚É£ Th√¥ng tin c√° nh√¢n</h3>
<div class="columns">
  <div class="column"><input class="input" name="ho_ten" placeholder="H·ªç v√† t√™n"></div>
  <div class="column"><input class="input" name="ma_nv" placeholder="M√£ nh√¢n vi√™n"></div>
  <div class="column"><input class="input" name="nam_sinh" placeholder="NƒÉm sinh"></div>
</div>

<div class="columns">
  <div class="column"><input class="input" name="gioi_tinh" placeholder="Gi·ªõi t√≠nh"></div>
  <div class="column"><input class="input" name="cccd" placeholder="CCCD / H·ªô chi·∫øu"></div>
  <div class="column"><input class="input" name="sdt" placeholder="S·ªë ƒëi·ªán tho·∫°i"></div>
</div>

<div class="columns">
  <div class="column"><input class="input" name="que_quan" placeholder="Qu√™ qu√°n"></div>
</div>

<!-- 2. GPLX -->
<h3 class="subtitle">2Ô∏è‚É£ Gi·∫•y ph√©p l√°i xe</h3>
<div class="columns">
  <div class="column"><input class="input" name="hang_gplx" placeholder="H·∫°ng GPLX"></div>
  <div class="column"><input class="input" name="so_gplx" placeholder="S·ªë GPLX"></div>
</div>

<div class="columns">
  <div class="column"><input type="date" class="input" name="ngay_trung_tuyen"></div>
  <div class="column"><input class="input" name="noi_cap"></div>
  <div class="column"><input type="date" class="input" name="han_gplx"></div>
</div>

<!-- 3. QU√Å TR√åNH L√ÄM VI·ªÜC -->
<h3 class="subtitle">3Ô∏è‚É£ Qu√° tr√¨nh l√†m vi·ªác</h3>
<div class="columns">
  <div class="column">
    <input type="date" class="input" name="ngay_nhan_viec" onchange="calcChinhThuc()">
  </div>
  <div class="column">
    <select class="input" name="thu_viec" onchange="calcChinhThuc()">
      <option value="">Th·ªùi gian th·ª≠ vi·ªác</option>
      <option value="1">1 th√°ng</option>
      <option value="2">2 th√°ng</option>
      <option value="3">Gia h·∫°n th√™m</option>
    </select>
  </div>
  <div class="column">
    <input class="input" name="chinh_thuc" placeholder="Ng√†y ch√≠nh th·ª©c" readonly>
  </div>
</div>

<div class="columns">
  <div class="column"><input class="input" name="ghi_chu"></div>
</div>

<!-- 4. PH√ÇN C√îNG -->
<h3 class="subtitle">4Ô∏è‚É£ Ph√¢n c√¥ng</h3>
<div class="columns">
  <div class="column"><input class="input" name="xe_phu_trach"></div>
  <div class="column"><input class="input" name="tuyen_phu_trach"></div>
</div>

<!-- 5. B·∫¢O L√ÉNH -->
<h3 class="subtitle">5Ô∏è‚É£ B·∫£o l√£nh</h3>
<div class="columns">
  <div class="column"><input class="input" name="bl_ho_ten"></div>
  <div class="column"><input class="input" name="bl_quan_he"></div>
  <div class="column"><input class="input" name="bl_sdt"></div>
</div>

<div class="columns">
  <div class="column"><input class="input" name="bl_que_quan"></div>
</div>

<!-- 6. H·ªí S∆† -->
<h3 class="subtitle">6Ô∏è‚É£ H·ªì s∆°</h3>
<label><input type="checkbox" name="hs_cccd"> CCCD</label>
<label><input type="checkbox" name="hs_gplx"> GPLX</label>
<label><input type="checkbox" name="hs_suc_khoe"> Gi·∫•y kh√°m s·ª©c kho·∫ª</label>
<label><input type="checkbox" name="hs_so_yeu"> S∆° y·∫øu l√Ω l·ªãch</label>
<label><input type="checkbox" name="hs_cu_tru"> X√°c nh·∫≠n c∆∞ tr√∫</label>
<label><input type="checkbox" name="hs_dan_su"> X√°c nh·∫≠n d√¢n s·ª±</label>

<button class="button is-primary is-fullwidth mt-4" type="submit">
üíæ L∆ØU TH√îNG TIN T√ÄI X·∫æ
</button>

</form>
</div>
<!-- ================= END TAG: TH√îNG TIN T√ÄI X·∫æ ================= -->



<!-- ================= TAG NH·∫¨T K√ù V·∫¨N H√ÄNH ================= -->
<div id="nhatky" class="hidden form-box">

<button class="button mb-4" onclick="backHome()">‚¨Ö Quay l·∫°i</button>
<h2 class="title is-4">NH·∫¨T K√ù V·∫¨N H√ÄNH</h2>

<form>

<!-- 1. TH√îNG TIN CHUY·∫æN -->
<h3 class="subtitle">1. Th√¥ng tin chuy·∫øn</h3>
<div class="columns">
  <div class="column">
    <label class="label">Ng√†y v·∫≠n h√†nh</label>
    <input class="input" type="date" name="nk_ngay_van_hanh">
  </div>
  <div class="column">
    <label class="label">Bi·ªÉn s·ªë xe</label>
    <input class="input" name="nk_bien_so_xe">
  </div>
  <div class="column">
    <label class="label">T√†i x·∫ø</label>
    <input class="input" name="nk_tai_xe">
  </div>
</div>

<div class="columns">
  <div class="column">
    <label class="label">Tuy·∫øn ƒë∆∞·ªùng</label>
    <input class="input" name="nk_tuyen_duong">
  </div>
  <div class="column">
    <label class="label">ƒêi·ªÉm xu·∫•t ph√°t</label>
    <input class="input" name="nk_diem_xuat_phat">
  </div>
  <div class="column">
    <label class="label">ƒêi·ªÉm k·∫øt th√∫c</label>
    <input class="input" name="nk_diem_ket_thuc">
  </div>
</div>

<!-- 2. TH·ªúI GIAN V·∫¨N H√ÄNH -->
<h3 class="subtitle">2. Th·ªùi gian v·∫≠n h√†nh</h3>
<div class="columns">
  <div class="column">
    <label class="label">Gi·ªù xu·∫•t b·∫øn</label>
    <input class="input" type="time" name="nk_gio_xuat_ben">
  </div>
  <div class="column">
    <label class="label">Gi·ªù v·ªÅ b·∫øn</label>
    <input class="input" type="time" name="nk_gio_ve_ben">
  </div>
  <div class="column">
    <label class="label">T·ªïng th·ªùi gian (gi·ªù)</label>
    <input class="input" name="nk_tong_thoi_gian">
  </div>
</div>

<!-- 3. NHI√äN LI·ªÜU -->
<h3 class="subtitle">3. Nhi√™n li·ªáu</h3>
<div class="columns">
  <div class="column">
    <label class="label">S·ªë l∆∞·ª£ng nhi√™n li·ªáu (l√≠t)</label>
    <input class="input" name="nk_nhien_lieu_lit">
  </div>
  <div class="column">
    <label class="label">Chi ph√≠ nhi√™n li·ªáu</label>
    <input class="input" name="nk_chi_phi_nhien_lieu">
  </div>
  <div class="column">
    <label class="label">H√¨nh th·ª©c c·∫•p</label>
    <input class="input" name="nk_hinh_thuc_cap">
  </div>
</div>

<!-- 4. QU√ÉNG ƒê∆Ø·ªúNG & T·∫¢I -->
<h3 class="subtitle">4. Qu√£ng ƒë∆∞·ªùng & t·∫£i</h3>
<div class="columns">
  <div class="column">
    <label class="label">Km ƒë·∫ßu</label>
    <input class="input" name="nk_km_dau">
  </div>
  <div class="column">
    <label class="label">Km cu·ªëi</label>
    <input class="input" name="nk_km_cuoi">
  </div>
  <div class="column">
    <label class="label">T·ªïng km</label>
    <input class="input" name="nk_tong_km">
  </div>
</div>

<div class="columns">
  <div class="column">
    <label class="label">Kh·ªëi l∆∞·ª£ng h√†ng (kg)</label>
    <input class="input" name="nk_khoi_luong_hang">
  </div>
  <div class="column">
    <label class="label">S·ªë chuy·∫øn</label>
    <input class="input" name="nk_so_chuyen">
  </div>
  <div class="column"></div>
</div>

<!-- 5. S·ª∞ C·ªê & GHI CH√ö -->
<h3 class="subtitle">5. S·ª± c·ªë & ghi ch√∫</h3>
<div class="columns">
  <div class="column">
    <label class="label">S·ª± c·ªë ph√°t sinh</label>
    <input class="input" name="nk_su_co">
  </div>
  <div class="column">
    <label class="label">X·ª≠ l√Ω</label>
    <input class="input" name="nk_xu_ly">
  </div>
  <div class="column"></div>
</div>

<div class="columns">
  <div class="column is-full">
    <label class="label">Ghi ch√∫</label>
    <textarea class="textarea" name="nk_ghi_chu"></textarea>
  </div>
</div>
<button class="button is-primary mt-4">üíæ L∆∞u nh·∫≠t k√Ω v·∫≠n h√†nh</button>
</form>
</div>

<!-- ================= TAG B·∫¢O D∆Ø·ª†NG ‚Äì S·ª¨A CH·ªÆA ================= -->
<div id="baoduong" class="hidden form-box">

<button class="button mb-4" onclick="backHome()">‚¨Ö Quay l·∫°i</button>
<h2 class="title is-4">B·∫¢O D∆Ø·ª†NG ‚Äì S·ª¨A CH·ªÆA</h2>

<form>

<!-- 1. TH√îNG TIN XE -->
<h3 class="subtitle">1. Th√¥ng tin xe</h3>
<div class="columns">
  <div class="column">
    <label class="label">Bi·ªÉn s·ªë xe</label>
    <input class="input" name="bd_bien_so_xe">
  </div>
  <div class="column">
    <label class="label">KM b·∫£o d∆∞·ª°ng k·ª≥ tr∆∞·ªõc</label>
    <input class="input" name="bd_km_truoc">
  </div>
  <div class="column">
    <label class="label">KM b·∫£o d∆∞·ª°ng k·ª≥ n√†y</label>
    <input class="input" name="bd_km_hien_tai">
  </div>
</div>

<!-- 2. M·ªêC B·∫¢O D∆Ø·ª†NG -->
<h3 class="subtitle">2. M·ªëc b·∫£o d∆∞·ª°ng</h3>
<div class="columns">
  <div class="column">
    <label class="label">M·ªëc b·∫£o d∆∞·ª°ng</label>
    <div class="select is-fullwidth">
      <select name="bd_moc_bao_duong">
        <option value="">-- Ch·ªçn m·ªëc --</option>
        <option>5000</option>
        <option>7000</option>
        <option>10000</option>
      </select>
    </div>
  </div>
  <div class="column"></div>
  <div class="column"></div>
</div>

<!-- 3. TH·ªúI GIAN & TR·∫†NG TH√ÅI -->
<h3 class="subtitle">3. Th·ªùi gian & tr·∫°ng th√°i</h3>
<div class="columns">
  <div class="column">
    <label class="label">Ng√†y b·∫Øt ƒë·∫ßu b·∫£o d∆∞·ª°ng</label>
    <input class="input" type="date" name="bd_ngay_bat_dau">
  </div>
  <div class="column">
    <label class="label">Ng√†y k·∫øt th√∫c b·∫£o d∆∞·ª°ng</label>
    <input class="input" type="date" name="bd_ngay_ket_thuc">
  </div>
  <div class="column">
    <label class="label">Tr·∫°ng th√°i</label>
    <div class="select is-fullwidth">
      <select name="bd_trang_thai">
        <option value="">-- Ch·ªçn tr·∫°ng th√°i --</option>
        <option>ƒê√£ ho√†n th√†nh</option>
        <option>ƒêang th·ª±c hi·ªán</option>
        <option>Ch·ªù x·ª≠ l√Ω</option>
      </select>
    </div>
  </div>
</div>

<!-- 4. ƒê∆†N V·ªä B·∫¢O D∆Ø·ª†NG -->
<h3 class="subtitle">4. ƒê∆°n v·ªã b·∫£o d∆∞·ª°ng</h3>
<div class="columns">
  <div class="column">
    <label class="label">ƒê∆°n v·ªã b·∫£o d∆∞·ª°ng</label>
    <input class="input" name="bd_don_vi">
  </div>
  <div class="column">
    <label class="label">ƒê·ªãa ch·ªâ</label>
    <input class="input" name="bd_dia_chi">
  </div>
  <div class="column">
    <label class="label">Lo·∫°i ƒë∆°n v·ªã</label>
    <div class="select is-fullwidth">
      <select name="bd_loai_don_vi">
        <option value="">-- Ch·ªçn lo·∫°i --</option>
        <option>Gara h·ª£p ƒë·ªìng c√¥ng ty</option>
        <option>Gara ngo√†i</option>
      </select>
    </div>
  </div>
</div>

<!-- 5. H·∫†NG M·ª§C & PH·ª§ T√ôNG -->
<h3 class="subtitle">5. H·∫°ng m·ª•c & ph·ª• t√πng</h3>
<div class="columns">
  <div class="column">
    <label class="label">H·∫°ng m·ª•c b·∫£o d∆∞·ª°ng</label>
    <input class="input" name="bd_hang_muc">
  </div>
  <div class="column">
    <label class="label">Ph√°t sinh</label>
    <input class="input" name="bd_phat_sinh">
  </div>
  <div class="column">
    <label class="label">Ph·ª• t√πng thay th·∫ø</label>
    <input class="input" name="bd_phu_tung">
  </div>
</div>

<!-- 6. T√ÄI CH√çNH -->
<h3 class="subtitle">6. T√†i ch√≠nh</h3>
<div class="columns">
  <div class="column">
    <label class="label">H√¨nh th·ª©c ch·ª©ng t·ª´</label>
    <div class="select is-fullwidth">
      <select name="bd_chung_tu">
        <option value="">-- Ch·ªçn --</option>
        <option>C√≥ h√≥a ƒë∆°n</option>
        <option>Kh√¥ng h√≥a ƒë∆°n</option>
        <option>C√¥ng n·ª£</option>
      </select>
    </div>
  </div>
  <div class="column">
    <label class="label">T·ªïng ti·ªÅn</label>
    <input class="input" name="bd_tong_tien">
  </div>
  <div class="column"></div>
</div>

<!-- 7. GHI CH√ö -->
<h3 class="subtitle">7. Ghi ch√∫</h3>
<div class="columns">
  <div class="column is-full">
    <label class="label">Ghi ch√∫</label>
    <textarea class="textarea" name="bd_ghi_chu"></textarea>
  </div>
</div>

<button class="button is-primary mt-4">üíæ L∆∞u th√¥ng tin b·∫£o d∆∞·ª°ng</button>
</form>
</div>

</section>
<!-- ================= TAG QU·∫¢N L√ù NHI√äN LI·ªÜU ================= -->
<div id="fuel" class="hidden form-box">

<button class="button mb-4" onclick="backHome()">‚¨Ö Quay l·∫°i</button>
<h2 class="title is-4">QU·∫¢N L√ù NHI√äN LI·ªÜU</h2>

<form>

<h3 class="subtitle">1. Th√¥ng tin b·ªï sung nhi√™n li·ªáu</h3>
<div class="columns">
  <div class="column">
    <label class="label">Bi·ªÉn s·ªë xe</label>
    <input class="input" name="fuel_bien_so_xe">
  </div>
  <div class="column">
    <label class="label">Km khi b·ªï sung</label>
    <input class="input" name="fuel_km_bo_sung">
  </div>
  <div class="column"></div>
</div>

<h3 class="subtitle">2. Chi ti·∫øt nhi√™n li·ªáu</h3>
<div class="columns">
  <div class="column">
    <label class="label">Ng√†y th·ª±c hi·ªán</label>
    <input class="input" type="date" name="fuel_ngay_thuc_hien">
  </div>
  <div class="column">
    <label class="label">S·ªë l√≠t</label>
    <input class="input" type="number" step="0.01" id="fuel_so_lit" name="fuel_so_lit">
  </div>
  <div class="column">
    <label class="label">ƒê∆°n gi√°</label>
    <input class="input" type="number" step="1" id="fuel_don_gia" name="fuel_don_gia">
  </div>
</div>

<div class="columns">
  <div class="column">
    <label class="label">Th√†nh ti·ªÅn</label>
    <input class="input" name="fuel_thanh_tien" id="fuel_thanh_tien" readonly>
  </div>
  <div class="column"></div>
  <div class="column"></div>
</div>

<h3 class="subtitle">3. Ghi ch√∫</h3>
<div class="columns">
  <div class="column is-full">
    <label class="label">Ghi ch√∫</label>
    <textarea class="textarea" name="fuel_ghi_chu"></textarea>
  </div>
</div>

<button class="button is-primary mt-4">üíæ L∆∞u th√¥ng tin nhi√™n li·ªáu</button>
</form>
</div>

<!-- ================= TAG ƒê√ÅNH GI√Å NH√ÇN S·ª∞ ================= -->
<div id="danhgia" class="hidden form-box">

<button class="button mb-4" onclick="backHome()">‚¨Ö Quay l·∫°i</button>
<h2 class="title is-4">ƒê√ÅNH GI√Å NH√ÇN S·ª∞</h2>

<form>

<h3 class="subtitle">1. Th√¥ng tin nh√¢n s·ª±</h3>
<div class="columns">
  <div class="column">
    <label class="label">Ng√†y ƒë√°nh gi√°</label>
    <input class="input" type="date" name="dg_ngay">
  </div>
  <div class="column">
    <label class="label">H·ªç v√† t√™n</label>
    <input class="input" name="dg_ho_ten">
  </div>
  <div class="column">
    <label class="label">M√£ nh√¢n vi√™n</label>
    <input class="input" name="dg_ma_nv">
  </div>
</div>

<h3 class="subtitle">2. L·ªói vi ph·∫°m</h3>
<div class="columns">
  <div class="column">
    <label class="label">L·ªói vi ph·∫°m</label>
    <input class="input" name="dg_loi_vi_pham">
  </div>
  <div class="column">
    <label class="label">M·ª©c ƒë·ªô nghi√™m tr·ªçng</label>
    <div class="select is-fullwidth">
      <select name="dg_muc_do" id="dg_muc_do">
        <option value="">-- Ch·ªçn m·ª©c ƒë·ªô --</option>
        <option>Nh·∫π - C·∫£nh b√°o</option>
        <option>Trung b√¨nh - L·∫≠p bi√™n b·∫£n vi ph·∫°m</option>
        <option>N·∫∑ng - K·ª∑ lu·∫≠t theo quy ƒë·ªãnh</option>
      </select>
    </div>
  </div>
  <div class="column"></div>
</div>

<h3 class="subtitle">3. Theo d√µi s·ªë l·∫ßn vi ph·∫°m</h3>
<div class="columns">
  <div class="column">
    <label class="label">S·ªë l·∫ßn vi ph·∫°m m·ª©c Trung b√¨nh</label>
    <input class="input" type="number" id="dg_tb" name="dg_vi_pham_tb">
  </div>
  <div class="column">
    <label class="label">S·ªë l·∫ßn vi ph·∫°m m·ª©c N·∫∑ng</label>
    <input class="input" type="number" id="dg_nang" name="dg_vi_pham_nang">
  </div>
  <div class="column"></div>
</div>

<h3 class="subtitle">4. K·∫øt lu·∫≠n & c·∫£nh b√°o</h3>
<div class="columns">
  <div class="column is-full">
    <label class="label">K·∫øt lu·∫≠n t·ª± ƒë·ªông</label>
    <textarea class="textarea" name="dg_ket_luan" id="dg_ket_luan" readonly></textarea>
  </div>
</div>

<button class="button is-primary mt-4">üíæ L∆∞u ƒë√°nh gi√° nh√¢n s·ª±</button>

</form>
</div>



<script>
function openTag(id){
  document.getElementById("home").classList.add("hidden");
  ["xe","taixe","nhatky","baoduong","fuel","danhgia"].forEach(
    t => document.getElementById(t).classList.add("hidden")
  );
  document.getElementById(id).classList.remove("hidden");
}

function backHome(){
  document.getElementById("home").classList.remove("hidden");
  ["xe","taixe","nhatky","baoduong","fuel","danhgia"].forEach(
    t => document.getElementById(t).classList.add("hidden")
  );
}

function calc(i,d,t){
  if(!i.value) return;
  let x=new Date(i.value); 
  x.setDate(x.getDate()-d);
  document.querySelector(`[name="${t}"]`).value =
    x.toISOString().split("T")[0];
}

/* T√çNH TH√ÄNH TI·ªÄN NHI√äN LI·ªÜU */
function tinhTienNhienLieu(){
  const lit = parseFloat(document.getElementById("fuel_so_lit")?.value) || 0;
  const gia = parseFloat(document.getElementById("fuel_don_gia")?.value) || 0;
  const tt = document.getElementById("fuel_thanh_tien");
  if(tt) tt.value = lit * gia;
}

document.addEventListener("input", function(e){
  if(e.target.id==="fuel_so_lit" || e.target.id==="fuel_don_gia"){
    tinhTienNhienLieu();
  }
});

document.addEventListener("input", function(){
  const tb = parseInt(document.getElementById("dg_tb")?.value || 0);
  const nang = parseInt(document.getElementById("dg_nang")?.value || 0);
  const kl = document.getElementById("dg_ket_luan");

  if(!kl) return;

  let rs = "";

  if(tb >= 2 && tb < 3){
    rs += "‚ö†Ô∏è V∆∞·ª£t 2 l·∫ßn vi ph·∫°m m·ª©c Trung b√¨nh ‚Üí Th·ª±c hi·ªán ƒë√†o t·∫°o l·∫°i.\n";
  }
  if(tb >= 3){
    rs += "üö® V∆∞·ª£t 3 l·∫ßn vi ph·∫°m m·ª©c Trung b√¨nh ‚Üí Chuy·ªÉn nh√¢n s·ª± qu·∫£n l√Ω.\n";
  }
  if(nang === 1){
    rs += "üö´ 1 l·∫ßn vi ph·∫°m m·ª©c N·∫∑ng ‚Üí ƒê√¨nh ch·ªâ c√¥ng vi·ªác d∆∞·ªõi 15 ng√†y.\n";
  }
  if(nang >= 2){
    rs += "‚ùå 2 l·∫ßn vi ph·∫°m m·ª©c N·∫∑ng ‚Üí Sa th·∫£i theo quy ƒë·ªãnh.\n";
  }

  if(rs==="") rs = "Ch∆∞a ph√°t sinh c·∫£nh b√°o.";

  kl.value = rs;
});
</script>

<script>
const SCRIPT_URL = "https://script.google.com/macros/s/AKfycbx572nvG02W5fC9cisYLZJe5bVfo3vTDyQ9IrVYIEhvwo8NnTsoHuKrcxQXbBsNLsbW/exec";

/* ===== TRA C·ª®U XE ===== */
function searchXe(){
  const bienSo = document.getElementById("search_bien_so_xe").value.trim();
  if(!bienSo) return alert("Vui l√≤ng nh·∫≠p bi·ªÉn s·ªë xe");

  fetch(`${SCRIPT_URL}?action=searchXe&bien_so_xe=${encodeURIComponent(bienSo)}`)
    .then(r=>r.json())
    .then(renderXeTable)
    .catch(()=>alert("L·ªói truy v·∫•n d·ªØ li·ªáu"));
}

function renderXeTable(data){
  if(!data || data.length===0){
    xe_result.innerHTML = "<p>Kh√¥ng c√≥ d·ªØ li·ªáu</p>";
    return;
  }

  let html = `
  <table class="table is-bordered is-fullwidth is-hoverable">
    <thead>
      <tr>
        <th>Bi·ªÉn s·ªë</th>
        <th>Lo·∫°i xe</th>
        <th>NƒÉm SX</th>
        <th>S·ªë khung</th>
        <th>S·ªë m√°y</th>
        <th></th>
      </tr>
    </thead><tbody>`;

  data.forEach(r=>{
    html+=`
    <tr>
      <td>${r.bien_so_xe}</td>
      <td>${r.loai_xe}</td>
      <td>${r.nam_sx}</td>
      <td>${r.so_khung}</td>
      <td>${r.so_may}</td>
      <td>
        <button class="button is-small is-link"
          onclick='fillXeForm(${JSON.stringify(r)})'>Ch·ªçn</button>
      </td>
    </tr>`;
  });

  xe_result.innerHTML = html + "</tbody></table>";
}

/* ===== ƒê·ªî D·ªÆ LI·ªÜU V√ÄO FORM ===== */
function fillXeForm(data){
  const f = xeForm;
  Object.keys(data).forEach(k=>{
    if(f.elements[k]){
      f.elements[k].value = data[k];
      if(k==="bien_so_xe") f.elements[k].readOnly = true;
    }
  });
}

/* ===== T√çNH TH·ªÇ T√çCH TH√ôNG ===== */
function calcTheTichThung(){
  const d=+xeForm.thung_dai.value||0;
  const r=+xeForm.thung_rong.value||0;
  const c=+xeForm.thung_cao.value||0;

  if(d&&r&&c){
    xeForm.kich_thuoc_thung.value=`${d} x ${r} x ${c} m`;
    xeForm.the_tich_thung.value=(d*r*c).toFixed(2);
  }else{
    xeForm.kich_thuoc_thung.value="";
    xeForm.the_tich_thung.value="";
  }
}

/* ===== SUBMIT ===== */
xeForm.addEventListener("submit",function(e){
  e.preventDefault();
  const data={action:"saveXe"};
  [...this.elements].forEach(el=>el.name&&(data[el.name]=el.value));

  fetch(SCRIPT_URL,{
    method:"POST",
    headers:{"Content-Type":"application/json"},
    body:JSON.stringify(data)
  })
  .then(r=>r.json())
  .then(res=>{
    if(res.status==="success"){
      alert("ƒê√£ l∆∞u th√¥ng tin xe");
      resetThongTinXe();
    }else alert(res.message||"L·ªói ghi d·ªØ li·ªáu");
  });
});

/* ===== RESET ===== */
function resetThongTinXe(){
  xeForm.reset();
  xeForm.bien_so_xe.readOnly=false;
  xe_result.innerHTML="";
}
</script>

<script>
function calcChinhThuc(){
  const f = document.forms.taixeForm;
  if(!f.ngay_nhan_viec.value || !f.thu_viec.value) return;
  const d = new Date(f.ngay_nhan_viec.value);
  d.setMonth(d.getMonth() + parseInt(f.thu_viec.value));
  f.chinh_thuc.value = d.toISOString().split("T")[0];
}

// ===== SUBMIT =====
document.getElementById("taixeForm").addEventListener("submit", async e=>{
  e.preventDefault();
  const f = e.target;
  const data = {};
  [...f.elements].forEach(el=>{
    if(!el.name) return;
    data[el.name] = el.type === "checkbox" ? el.checked : el.value;
  });

  const res = await fetch(SCRIPT_URL,{
    method:"POST",
    body:JSON.stringify({tag:"TaiXe", data})
  });

  alert("L∆∞u th√†nh c√¥ng");
  f.reset();
});

// ===== SEARCH =====
async function searchTaiXe(){
  const key = document.getElementById("search_mnv").value;
  const res = await fetch(`${SCRIPT_URL}?tag=TaiXe&ma_nv=${key}`);
  const data = await res.json();
  const f = document.forms.taixeForm;

  Object.keys(data).forEach(k=>{
    if(f[k]){
      f[k].type==="checkbox" ? f[k].checked=data[k] : f[k].value=data[k];
    }
  });
}
</script>


</body>
</html>

